<!DOCTYPE html>
<html>
<head>
    <title>Edit Product</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <h1>Edit Product</h1>

        <% if (typeof error !== 'undefined' && error) { %>
            <p style="color: red;"><%= error %></p>
        <% } %>

        <form action="/products/<%= product._id %>?_method=PUT" method="POST">
            <div>
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" value="<%= product.name %>" required>
            </div>
            <div>
                <label for="description">Description:</label>
                <textarea id="description" name="description" required><%= product.description %></textarea>
            </div>
            <div>
                <label for="price">Price:</label>
                <input type="number" id="price" name="price" step="0.01" value="<%= product.price %>" required>
            </div>
            <div>
                <label for="category">Category:</label>
                <select id="category" name="category">
                    <% categories.forEach(category => { %>
                        <option value="<%= category._id %>" <%= product.category && product.category._id.toString() === category._id.toString() ? 'selected' : '' %>><%= category.name %></option>
                    <% }); %>
                </select>
            </div>
            <div>
                <label for="material">Material:</label>
                <input type="text" id="material" name="material" value="<%= product.material %>">
            </div>
            <div>
                <label for="stock">Stock:</label>
                <input type="number" id="stock" name="stock" value="<%= product.stock %>">
            </div>
            <button type="submit">Update Product</button>
        </form>

        <a href="/products">Back to Product List</a>
    </div>
</body>
</html>