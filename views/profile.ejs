<!DOCTYPE html>
<html>
<head>
    <title>Profile</title>
    <link rel="stylesheet" href="/style.css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <div class="container">
        <div class="profile-container">

        <% if (editing) { %>
            <h2>Edit Profile</h2>
            <% if (errors && errors.length > 0) { %>
                <ul class="error">
                    <% errors.forEach(error => { %>
                        <li><%= error.msg %></li>
                    <% }); %>
                </ul>
            <% } %>
            <form action="/profile/edit" method="POST">
                <div>
                    <label for="username">Username:</label>
                    <input type="text" id="username" name="username" value="<%= user.username %>" required>
                </div>
                <div>
                    <label for="firstName">First Name:</label>
                    <input type="text" id="firstName" name="firstName" value="<%= user.firstName %>">
                </div>
                <div>
                    <label for="lastName">Last Name:</label>
                    <input type="text" id="lastName" name="lastName" value="<%= user.lastName %>">
                </div>
                <div>
                    <label for="location">Location:</label>
                    <input type="text" id="location" name="location" value="<%= user.location %>">
                </div>
                <div>
                    <label for="website">Website:</label>
                    <input type="text" id="website" name="website" value="<%= user.website %>">
                </div>
                <div>
                    <label for="bio">Bio:</label>
                    <textarea id="bio" name="bio"><%= user.bio %></textarea>
                </div>
                <button type="submit">Update Profile</button>
                <a href="/profile">Cancel</a>
            </form>
        <% } else { %>

             <div class="profile-left">
                <div class="profile-image">
                     <img src="<%= user.profilePicture || '/images/default-profile.png' %>" alt="Profile Picture">
                </div>
                <h2 class="profile-name"><%= user.username %></h2>
                <p class="profile-description"><%= user.bio %></p>
                 <div class="profile-social">
                      <a href="#"><i class="fa fa-facebook"></i></a>
                      <a href="#"><i class="fa fa-twitter"></i></a>
                      <a href="#"><i class="fa fa-google-plus"></i></a>
                      <a href="#"><i class="fa fa-linkedin"></i></a>
                 </div>
              </div>

              <div class="profile-right">
                    <div class="profile-tabs">
                        <button class="tab-button active">О пользователе</button>
                        <button class="tab-button">Отправить сообщение</button>
                    </div>

                    <div class="profile-details">
                          <div class="detail-row">
                            <span class="detail-label">Email:</span>
                            <span class="detail-value"><%= user.email %></span>
                          </div>
                          <div class="detail-row">
                            <span class="detail-label">First Name:</span>
                            <span class="detail-value"><%= user.firstName %></span>
                          </div>
                          <div class="detail-row">
                            <span class="detail-label">Last Name:</span>
                            <span class="detail-value"><%= user.lastName %></span>
                          </div>
                          <div class="detail-row">
                            <span class="detail-label">Location:</span>
                            <span class="detail-value"><%= user.location %></span>
                          </div>
                           <div class="detail-row">
                            <span class="detail-label">Website:</span>
                            <span class="detail-value"><%= user.website %></span>
                          </div>
                    </div>

                      <form action="/profile/upload" method="POST" enctype="multipart/form-data">
                            <label for="profilePicture">Update Picture</label>
                            <input type="file" id="profilePicture" name="profilePicture">
                            <button type="submit">Upload</button>
                      </form>
                      <form action="/profile/remove-picture" method="POST">
                            <button type="submit">Remove Profile Picture</button>
                      </form>

                      <a href="/profile?edit=true">Edit Profile</a>
                      <a href="/auth/logout">Logout</a>

                      <div class="danger-zone">
                            <h2>Danger Zone</h2>
                            <form action="/profile/delete" method="POST">
                                <button type="submit">Delete Account</button>
                            </form>
                      </div>
              </div>

        <% } %>
        </div>
    </div>
</body>
</html>